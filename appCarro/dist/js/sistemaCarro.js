/*! appcarro - v1.0.0 - 2016-04-15 */var AppCarro=function(){function a(a){s++;var b=new Carro(document.getElementById("fabricante").value,document.getElementById("modelo").value,document.getElementById("ano").value,document.getElementById("cor").value,document.getElementById("placa").value,s);A.push(b),r.setItem("carrosList",JSON.stringify(A)),d(),a.preventDefault()}function b(a){t++;var b=document.getElementById("codigoCarro"),c=b.selectedIndex,d=b[c],e=d.innerText,f=new Simulacao(e,document.getElementById("nomeCliente").value,document.querySelector(".opcaoSimulacao:checked").value,document.getElementById("dataInicio").value,document.getElementById("dataTermino").value,document.getElementById("origem").value,document.getElementById("destino").value,z,t);B.push(f),r.setItem("simulacaoList",JSON.stringify(B)),g(),a.preventDefault()}function c(a){var b;for(b=a.options.length-1;b>=0;b--)a.remove(b)}function d(){var a=r.getItem("carrosList");A=null!==a?JSON.parse(a):[];var b=document.getElementById("lista");b.textContent="";var d=document.getElementById("codigoCarro");c(d);for(var f=0;f<A.length;f++){var g=A[f],h=document.getElementById("modeloInformacaoCarro"),i=h.content.firstElementChild.cloneNode(!0);Util.replaceWithData(i,g),i.setAttribute("data-codigo",g.codigoCarro);var j=i.querySelector(".btrExluirCarro");j.addEventListener("click",function(a){var b=parseInt(a.target.parentNode.parentNode.getAttribute("data-codigo"));e(b)});var b=document.getElementById("lista");b.appendChild(i);var k=document.createElement("option");k.setAttribute("value",g.codigoCarro),k.innerText=g.codigoCarro+" - "+g.modelo,d.appendChild(k)}}function e(a){carrosList=A.filter(function(b){return b.codigoCarro!==a}),r.setItem("carrosList",JSON.stringify(carrosList)),d()}function f(a){simulacoesList=B.filter(function(b){return b.idSimulacao!==a}),r.setItem("simulacaoList",JSON.stringify(simulacoesList)),g()}function g(){var a=r.getItem("simulacaoList");B=null!==a?JSON.parse(a):[];var b=document.getElementById("listaSimulacao");b.textContent="";for(var c=0;c<B.length;c++){var d=B[c],e=document.getElementById("modeloInformacaoSimulacao"),g=e.content.firstElementChild.cloneNode(!0);Util.replaceWithData(g,d),g.setAttribute("data-codigo",d.idSimulacao);var h=g.querySelector(".btrExluirSimulacao");h.addEventListener("click",function(a){var b=parseInt(a.target.parentNode.parentNode.getAttribute("data-codigo"));f(b)});var b=document.getElementById("listaSimulacao");b.appendChild(g)}}function h(){var a=document.getElementById("placa");a.removeEventListener("keyup",function(){var a=document.getElementById("placa");a.value=a.value.replace(/[^a-z0-9]/gim,"")},!1)}function i(){var a=document.getElementById("origem").value,b=document.getElementById("destino").value;if(""!==b){var c=new google.maps.DirectionsService,d={origin:a,destination:b,travelMode:google.maps.DirectionsTravelMode.DRIVING};c.route(d,function(a,b){if(b===google.maps.DirectionsStatus.OK){z=a.routes[0].legs[0].distance.value/1e3;var c=document.getElementById("distanciaCalculada");c.innerText=z.toString().concat(" KM")}})}}function j(){v.setAttribute("style","display: none"),w.setAttribute("style","display: inherit")}function k(){w.setAttribute("style","display: none"),v.setAttribute("style","display: inherit")}function l(){x.setAttribute("style","display: inherit"),y.setAttribute("style","display: none")}function m(){x.setAttribute("style","display: none"),y.setAttribute("style","display: inherit")}function n(){m(),getLocation()}function o(a,b){a.addEventListener("click",b)}function p(){v=document.getElementById("managerCarro"),w=document.getElementById("manager-Simulacao"),x=document.getElementById("opcoesPeriodo"),y=document.getElementById("opcoesKm"),l(),d(),g(),o(document.getElementById("btnAdicionar"),a),o(document.getElementById("btnAdicionarSimulacao"),b),o(document.getElementById("opcaoDias"),l),o(document.getElementById("opcaoKm"),n),o(document.getElementById("desativaValPlaca"),h),o(document.getElementById("carroTab"),k),o(document.getElementById("simulacaoTab"),j);var c=document.getElementById("placa");c.addEventListener("keyup",function(){var a=document.getElementById("placa");a.value=a.value.replace(/[^a-z0-9]/gim,"")},!1)}var q={},r=window.localStorage,s=0,t=0,u=document.getElementById("destino");u.addEventListener("blur",i);var v,w,x,y,z=null,A=[],B=[];return q.init=function(){console.log("AppCarro.init"),p()},q.getCatalog=function(){return console.log("AppCarro.getCatalog"),A},q}();