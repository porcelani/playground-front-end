/*! appcarro - v1.0.0 - 2016-04-10 */var AppCarro=function(){function a(a){l++;var b=new Carro(document.getElementById("fabricante").value,document.getElementById("modelo").value,document.getElementById("ano").value,document.getElementById("cor").value,document.getElementById("placa").value,l);p.push(b),k.setItem("carrosList",JSON.stringify(p)),d(),a.preventDefault()}function b(a){m++;var b=document.getElementById("codigoCarro"),c=b.selectedIndex,d=b[c],e=d.innerText,g=new Simulacao(e,document.getElementById("nomeCliente").value,document.querySelector(".opcaoSimulacao:checked").value,document.getElementById("dataInicio").value,document.getElementById("dataTermino").value,document.getElementById("origem").value,document.getElementById("destino").value,o,m);q.push(g),k.setItem("simulacaoList",JSON.stringify(q)),f(),a.preventDefault()}function c(a){var b;for(b=a.options.length-1;b>=0;b--)a.remove(b)}function d(){var a=document.getElementById("lista");a.textContent="";var b=document.getElementById("codigoCarro");c(b);for(var d=0;d<p.length;d++){var f=p[d],g=document.getElementById("modeloInformacaoCarro"),h=g.content.firstElementChild.cloneNode(!0);Util.replaceWithData(h,f),h.setAttribute("data-codigo",f.codigoCarro);var i=h.querySelector(".btrExluirCarro");i.addEventListener("click",function(a){var b=parseInt(a.target.parentNode.getAttribute("data-codigo"));e(b)});var a=document.getElementById("lista");a.appendChild(h);var j=document.createElement("option");j.setAttribute("value",f.codigoCarro),j.innerText=f.codigoCarro+" - "+f.modelo,b.appendChild(j)}}function e(a){carrosList=p.filter(function(b){return b.codigoCarro!==a}),k.setItem("carrosList",JSON.stringify(carrosList)),d()}function f(){var a=document.getElementById("listaSimulacao");a.textContent="";for(var b=0;b<q.length;b++){var c=q[b],d=document.getElementById("modeloInformacaoSimulacao"),e=d.content.firstElementChild.cloneNode(!0);Util.replaceWithData(e,c);var a=document.getElementById("listaSimulacao");a.appendChild(e)}}function g(){var a=document.getElementById("placa");a.removeEventListener("keyup",function(){var a=document.getElementById("placa");a.value=a.value.replace(/[^a-z0-9]/gim,"")},!1)}function h(){var a=document.getElementById("origem").value,b=document.getElementById("destino").value;if(""!==b){var c=new google.maps.DirectionsService,d={origin:a,destination:b,travelMode:google.maps.DirectionsTravelMode.DRIVING};c.route(d,function(a,b){if(b===google.maps.DirectionsStatus.OK){o=a.routes[0].legs[0].distance.value/1e3;var c=document.getElementById("distanciaCalculada");c.innerText=o.toString().concat(" KM")}})}}function i(){var c=k.getItem("carrosList");null!==c?(p=JSON.parse(c),d()):p=[];var e=k.getItem("simulacaoList");null!==e?(q=JSON.parse(e),f()):q=[];var h=document.getElementById("btnAdicionar");h.addEventListener("click",a);var i=document.getElementById("btnAdicionarSimulacao");i.addEventListener("click",b);var j=document.getElementById("opcaoKm");j.addEventListener("click",getLocation);var l=document.getElementById("placa");l.addEventListener("keyup",function(){var a=document.getElementById("placa");a.value=a.value.replace(/[^a-z0-9]/gim,"")},!1);var m=document.getElementById("desativaValPlaca");m.addEventListener("click",g)}var j={},k=window.localStorage,l=0,m=0,n=document.getElementById("destino");n.addEventListener("blur",h);var o=null,p=[],q=[];return j.init=function(){console.log("AppCarro.init"),i()},j.getCatalog=function(){return console.log("AppCarro.getCatalog"),p},j}();